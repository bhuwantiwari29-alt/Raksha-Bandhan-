<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Premium Raksha Bandhan Experience</title>
    <style>
        /* --- Google Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Great+Vibes&display=swap');

        /* --- CSS Variables for a Polished Neon Theme --- */
        :root {
            --bg-color: #0d021a;
            --primary-glow: #e040fb; /* Vibrant Magenta */
            --secondary-glow: #00e5ff; /* Bright Cyan */
            --tertiary-glow: #ffea00; /* Neon Gold */
            --text-color: #e0e0e0;
            --card-bg: rgba(20, 5, 35, 0.4);
            --border-color: rgba(255, 255, 255, 0.1);
            --whatsapp-green: #25D366;
            --font-main: 'Poppins', sans-serif;
            --font-festive: 'Great Vibes', cursive;
        }

        /* --- Base Setup & Reset --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden; /* Absolutely no scrolling */
            font-family: var(--font-main);
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        /* --- Background Effects (Stars) --- */
        #starfield, #starfield2, #starfield3 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
            z-index: 1;
            pointer-events: none;
        }

        @function multiple-box-shadow($n) {
            $value: '#{random(2000)}px #{random(2000)}px #FFF';
            @for $i from 2 through $n {
                $value: '#{$value} , #{random(2000)}px #{random(2000)}px #FFF';
            }
            @return unquote($value);
        }
        /* This is a SASS function, for pure CSS we write it out manually */
        #starfield {
            /* Hand-written version of the above SASS logic for pure CSS */
            box-shadow: 7px 1863px #FFF, 1799px 1294px #FFF, /* ... more values */ 1827px 124px #FFF;
            animation: animStar 150s linear infinite;
        }
        #starfield2 {
            box-shadow: 1073px 1820px #FFF, 1530px 174px #FFF, /* ... more values */ 935px 1204px #FFF;
            animation: animStar 100s linear infinite;
        }
        #starfield3 {
             box-shadow: 1913px 485px #FFF, 1968px 1011px #FFF, /* ... more values */ 561px 1895px #FFF;
             animation: animStar 75s linear infinite;
        }
        
        @keyframes animStar {
            from { transform: translateY(0px); }
            to   { transform: translateY(-2000px); }
        }

        /* --- Interactive Cursor Glow --- */
        #cursor-glow {
            position: fixed;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(171, 71, 188, 0.2), transparent 60%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: 2;
            transition: width 0.3s, height 0.3s;
        }

        /* --- Landing Screen (Before Reveal) --- */
        #landing-screen {
            position: fixed;
            inset: 0;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            background: rgba(13, 2, 26, 0.8);
            backdrop-filter: blur(5px);
            transition: opacity 1.2s cubic-bezier(0.77, 0, 0.175, 1), transform 1.2s cubic-bezier(0.77, 0, 0.175, 1);
        }
        
        #landing-screen.is-hiding {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }

        #landing-screen h1 {
            font-family: var(--font-festive);
            font-size: clamp(3rem, 10vw, 6rem);
            line-height: 1.2;
            text-shadow: 0 0 10px var(--primary-glow), 0 0 20px var(--primary-glow);
            animation: subtle-glow 4s ease-in-out infinite;
        }
        
        #landing-screen p {
             font-size: clamp(1rem, 4vw, 1.5rem);
             margin-top: -10px;
             text-transform: uppercase;
             letter-spacing: 2px;
             color: var(--secondary-glow);
             text-shadow: 0 0 5px var(--secondary-glow);
        }

        #reveal-button {
            margin-top: 40px;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: transparent;
            border: 2px solid var(--primary-glow);
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        #reveal-button::before, #reveal-button::after {
            content: '';
            position: absolute;
            inset: -4px;
            border: 2px solid;
            border-radius: 50%;
            opacity: 0.5;
            animation: pulse-ring 3s infinite;
        }
        #reveal-button::before { border-color: var(--primary-glow); }
        #reveal-button::after { border-color: var(--secondary-glow); animation-delay: -1.5s; }
        #reveal-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--primary-glow), 0 0 30px var(--secondary-glow);
        }

        @keyframes pulse-ring {
            0% { transform: scale(0.95); opacity: 0.5; }
            70% { transform: scale(1.3); opacity: 0; }
            100% { transform: scale(0.95); opacity: 0; }
        }

        @keyframes subtle-glow {
            0%, 100% { text-shadow: 0 0 10px var(--primary-glow), 0 0 20px var(--primary-glow); }
            50% { text-shadow: 0 0 15px var(--primary-glow), 0 0 30px var(--secondary-glow); }
        }

        /* --- Main Celebration Page --- */
        #celebration-screen {
            position: fixed;
            inset: 0;
            z-index: 10;
            display: none;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            padding: 20px 15px;
            opacity: 0;
            animation: fade-in 1s ease-in forwards;
        }
        
        @keyframes fade-in {
            to { opacity: 1; }
        }
        
        #content-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            padding: clamp(20px, 4vw, 40px);
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            max-width: 600px;
            width: 95%;
            text-align: center;
            z-index: 12;
        }
        
        #main-heading {
            font-family: var(--font-festive);
            font-size: clamp(3rem, 10vw, 5.5rem);
            animation: disco-text 6s linear infinite;
        }

        #rakhi-image-container {
            position: relative;
            perspective: 1000px;
        }

        #rakhi-image {
            width: clamp(150px, 30vw, 200px);
            height: auto;
            border-radius: 20px;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            filter: drop-shadow(0 0 10px var(--primary-glow));
            animation: animated-shadow 6s linear infinite;
        }
        
        #greeting-message {
            font-size: clamp(1.1rem, 3.5vw, 1.6rem);
            font-weight: 400;
            line-height: 1.6;
            max-width: 95%;
        }

        #name-display {
            display: inline-block;
            font-weight: 600;
            animation: name-glow 4s linear infinite;
        }
        
        .controls-wrapper {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 95%;
            max-width: 500px;
            z-index: 12;
            padding-bottom: 10px;
        }
        
        .input-group { position: relative; }
        
        .input-group input, .input-group textarea {
            width: 100%;
            padding: 12px 12px 12px 40px; /* Space for icon */
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-color);
            font-size: 1rem;
            font-family: var(--font-main);
            transition: all 0.3s ease;
        }
        
        .input-group input:focus, .input-group textarea:focus {
            outline: none;
            border-color: var(--primary-glow);
            box-shadow: 0 0 10px var(--primary-glow);
        }
        .input-group textarea { resize: none; height: 60px; }
        
        .input-group::before {
            content: 'üë§'; /* Person icon */
            position: absolute;
            left: 12px;
            top: 12px;
            opacity: 0.5;
        }
        .input-group.message-input::before {
            content: '‚úâÔ∏è'; /* Message icon */
        }
        
        .buttons-group {
            display: flex;
            gap: 15px;
            width: 100%;
        }

        .button {
            flex: 1;
            padding: 12px 15px;
            border-radius: 10px;
            border: none;
            text-decoration: none;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }
        
        /* üî•üî• PASTE YOUR AMAZON AFFILIATE LINK BELOW üî•üî• */
        .gift-button {https://www.amazon.in/s?k=Rakhi+Gifts&crid=1MYQBZT2TLGLU&sprefix=rakhi+gi%2Caps%2C1081&linkCode=ll2&tag=allinonest00e-21&linkId=0eaf57fd64a40faacc9240f25a9a020e&language=en_IN&ref_=as_li_ss_tl
            background: linear-gradient(45deg, #af40ee, #ff69b4);
            color: white;
        }
        .gift-button::before { /* Shimmer effect */
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 4s infinite;
        }
        @keyframes shimmer {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: 100%; }
        }

        #whatsapp-share {
            background-color: var(--whatsapp-green);
            color: white;
        }
        #whatsapp-share:hover, .gift-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        #whatsapp-share svg { width: 20px; height: 20px; fill: white; }

        /* --- Advanced Animations --- */
        @keyframes disco-text {
            0%   { color: var(--primary-glow);   text-shadow: 0 0 10px var(--primary-glow); }
            25%  { color: var(--secondary-glow); text-shadow: 0 0 10px var(--secondary-glow); }
            50%  { color: var(--tertiary-glow);  text-shadow: 0 0 10px var(--tertiary-glow); }
            75%  { color: #76ff03;              text-shadow: 0 0 10px #76ff03; }
            100% { color: var(--primary-glow);   text-shadow: 0 0 10px var(--primary-glow); }
        }
        @keyframes animated-shadow {
            0%   { filter: drop-shadow(0 0 10px var(--primary-glow)); }
            33%  { filter: drop-shadow(0 0 15px var(--secondary-glow)); }
            66%  { filter: drop-shadow(0 0 10px var(--tertiary-glow)); }
            100% { filter: drop-shadow(0 0 10px var(--primary-glow)); }
        }
        @keyframes name-glow {
            0%   { color: var(--primary-glow);   text-shadow: 0 0 5px var(--primary-glow); }
            50%  { color: var(--secondary-glow); text-shadow: 0 0 5px var(--secondary-glow); }
            100% { color: var(--primary-glow);   text-shadow: 0 0 5px var(--primary-glow); }
        }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }
        
        /* --- Celebration Effects (Canvas & Petals) --- */
        #effects-container {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 15;
            overflow: hidden;
        }
        #music-canvas {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 5;
        }
        
        .petal {
            position: absolute;
            top: -10vh;
            width: 8px;
            height: 15px;
            border-radius: 50% 0;
            animation-name: fall;
            animation-timing-function: linear;
        }
    </style>
</head>
<body>
    <div id="starfield"></div>
    <div id="starfield2"></div>
    <div id="starfield3"></div>
    <div id="cursor-glow"></div>

    <!-- ======== 1. Premium Landing Screen ======== -->
    <div id="landing-screen">
        <h1>A Special Message</h1>
        <p>for Raksha Bandhan</p>
        <div id="reveal-button" title="Click to open">
            <span>Tap</span>
        </div>
    </div>
    
    <canvas id="music-canvas"></canvas>
    <div id="effects-container"></div>

    <!-- ======== 2. Premium Celebration Page ======== -->
    <div id="celebration-screen">
        
        <div id="content-card">
            <h1 id="main-heading">Happy Raksha Bandhan</h1>
            <div id="rakhi-image-container">
                <img src="rakhi.gif" alt="Animated Rakhi" id="rakhi-image">
            </div>
            <p id="greeting-message">
                From <span id="name-display">Someone</span>: <span id="message-display">Wishing you a very Happy Raksha Bandhan!</span>
            </p>
        </div>

        <div class="controls-wrapper">
            <div class="input-group">
                <input type="text" id="name-input" placeholder="Enter your name">
            </div>
            <div class="input-group message-input">
                 <textarea id="message-input" placeholder="Type your message"></textarea>
            </div>
            <div class="buttons-group">
                <!-- üî•üî• PASTE YOUR AMAZON AFFILIATE LINK BELOW üî•üî• -->
                <a href="https://www.amazon.in/s?k=rakhi+gifts+for+sister&_encoding=UTF8&tag=YOUR_TAG_HERE-21" target="_blank" class="button gift-button">
                    üéÅ Find a Gift
                </a>
                <a id="whatsapp-share" class="button" target="_blank">
                    <svg viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.36 3.45 16.86L2.05 22L7.31 20.6C8.75 21.39 10.36 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.92C21.95 6.46 17.5 2 12.04 2M12.04 20.13C10.56 20.13 9.11 19.74 7.85 19L7.54 18.82L4.44 19.6L5.26 16.61L5.06 16.29C4.18 14.93 3.82 13.44 3.82 11.91C3.82 7.37 7.52 3.67 12.04 3.67C16.56 3.67 20.26 7.37 20.26 11.92C20.26 16.46 16.56 20.13 12.04 20.13M17.41 14.39C17.16 14.26 16.05 13.72 15.82 13.63C15.59 13.54 15.42 13.5 15.26 13.75C15.1 14 14.61 14.6 14.48 14.77C14.35 14.93 14.23 14.96 13.98 14.83C13.73 14.71 12.92 14.43 11.93 13.57C11.14 12.89 10.61 12.06 10.45 11.8C10.29 11.55 10.42 11.42 10.54 11.3C10.65 11.19 10.78 11.02 10.91 10.86C11.04 10.71 11.1 10.58 11.23 10.34C11.36 10.09 11.29 9.87 11.22 9.75C11.15 9.62 10.61 8.33 10.41 7.84C10.21 7.35 10 7.42 9.84 7.42C9.69 7.42 9.52 7.42 9.36 7.42C9.2 7.42 8.94 7.49 8.72 7.74C8.5 7.99 7.96 8.48 7.96 9.67C7.96 10.86 9.39 12.16 9.55 12.36C9.71 12.56 12.22 16.41 15.93 18.03C16.64 18.33 17.15 18.52 17.51 18.68C18.11 18.96 18.6 18.93 18.99 18.56C19.43 18.15 20.12 17.34 20.35 16.96C20.58 16.58 20.58 16.27 20.51 16.14C20.45 16.02 20.25 15.92 20.03 15.83C19.8 15.73 19.57 15.67 19.34 15.61C19.12 15.55 18.93 15.54 18.76 15.7C18.6 15.85 17.66 14.65 17.41 14.39Z"></path></svg>
                    Share
                </a>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Element References ---
        const landingScreen = document.getElementById('landing-screen');
        const revealButton = document.getElementById('reveal-button');
        const celebrationScreen = document.getElementById('celebration-screen');
        const nameDisplay = document.getElementById('name-display');
        const messageDisplay = document.getElementById('message-display');
        const nameInput = document.getElementById('name-input');
        const messageInput = document.getElementById('message-input');
        const whatsappShareBtn = document.getElementById('whatsapp-share');
        const effectsContainer = document.getElementById('effects-container');
        const canvas = document.getElementById('music-canvas');
        const ctx = canvas.getContext('2d');
        const cursorGlow = document.getElementById('cursor-glow');
        const rakhiImageContainer = document.getElementById('rakhi-image-container');
        const rakhiImage = document.getElementById('rakhi-image');

        // --- Audio Setup ---
        const audio = new Audio('rakhi.mp3');
        audio.loop = true;
        let audioContext, analyser, source, dataArray;
        
        // --- State Variables ---
        let currentName = "Someone Special";
        let currentMessage = "wishing you a bond of love and protection. Happy Raksha Bandhan!";

        // --- Core Functions ---
        const initializeContent = () => {
            const urlParams = new URLSearchParams(window.location.search);
            currentName = urlParams.get('name')?.trim() || currentName;
            currentMessage = urlParams.get('msg')?.trim() || currentMessage;
            
            updateDisplay();
            updateInputs();
            updateWhatsAppLink();
        };
        
        const updateDisplay = () => {
            nameDisplay.textContent = currentName;
            messageDisplay.textContent = currentMessage;
        };
        
        const updateInputs = () => {
            nameInput.value = currentName;
            messageInput.value = currentMessage;
        };
        
        const updateWhatsAppLink = () => {
            const pageUrl = `${window.location.origin}${window.location.pathname}?name=${encodeURIComponent(currentName)}&msg=${encodeURIComponent(currentMessage)}`;
            const waMessage = `‚ú® You've received a special Raksha Bandhan greeting from *${currentName}*! ‚ú®\n\n_"${currentMessage}"_\n\nClick the link to see your beautiful message:\n${pageUrl}`;
            whatsappShareBtn.href = `https://api.whatsapp.com/send?text=${encodeURIComponent(waMessage)}`;
        };

        const setupAudioAnalysis = () => {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                source = audioContext.createMediaElementSource(audio);
                source.connect(analyser);
                analyser.connect(audioContext.destination);
                analyser.fftSize = 64;
                const bufferLength = analyser.frequencyBinCount;
                dataArray = new Uint8Array(bufferLength);
            } catch (e) {
                console.error("Web Audio API is not supported.", e);
            }
        };

        // --- Event Listeners ---
        revealButton.addEventListener('click', () => {
            landingScreen.classList.add('is-hiding');
            
            audio.play().then(() => {
                if (!audioContext) setupAudioAnalysis();
                animateMusic();
            }).catch(error => console.error("Audio playback failed:", error));
            
            startFallingPetals();
            
            setTimeout(() => {
                landingScreen.style.display = 'none';
                celebrationScreen.style.display = 'flex';
            }, 1200);
        });
        
        nameInput.addEventListener('input', (e) => {
            currentName = e.target.value.trim() || "Someone Special";
            updateDisplay();
            updateWhatsAppLink();
        });

        messageInput.addEventListener('input', (e) => {
            currentMessage = e.target.value.trim() || "wishing you a bond of love and protection. Happy Raksha Bandhan!";
            updateDisplay();
            updateWhatsAppLink();
        });

        document.body.addEventListener('mousemove', (e) => {
            cursorGlow.style.left = `${e.clientX}px`;
            cursorGlow.style.top = `${e.clientY}px`;
        });
        
        rakhiImageContainer.addEventListener('mousemove', (e) => {
            const { left, top, width, height } = rakhiImageContainer.getBoundingClientRect();
            const x = (e.clientX - left) / width - 0.5;
            const y = (e.clientY - top) / height - 0.5;
            rakhiImage.style.transform = `rotateX(${-y * 20}deg) rotateY(${x * 20}deg) scale(1.1)`;
        });

        rakhiImageContainer.addEventListener('mouseleave', () => {
            rakhiImage.style.transform = `rotateX(0deg) rotateY(0deg) scale(1)`;
        });

        // --- Animation & Effects ---
        const particles = [];
        const particleColors = ['#e040fb', '#00e5ff', '#ffea00', '#ffffff'];

        const animateMusic = () => {
            requestAnimationFrame(animateMusic);
            if (!analyser) return;

            analyser.getByteFrequencyData(dataArray);
            let avg = dataArray.reduce((a, b) => a + b, 0) / dataArray.length;
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (avg > 35) {
                const intensity = Math.min(Math.floor((avg - 35) / 10), 3);
                for (let i = 0; i < intensity; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        vx: (Math.random() - 0.5) * 2,
                        vy: (Math.random() - 0.5) * 2,
                        radius: Math.random() * 1.5 + 1,
                        color: particleColors[Math.floor(Math.random() * particleColors.length)],
                        life: 40
                    });
                }
            }

            particles.forEach((p, i) => {
                p.x += p.vx;
                p.y += p.vy;
                p.life--;
                if (p.life <= 0) particles.splice(i, 1);
                else {
                    ctx.beginPath();
                    ctx.globalAlpha = p.life / 40;
                    ctx.fillStyle = p.color;
                    ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
            ctx.globalAlpha = 1.0;
        };

        const startFallingPetals = () => {
            const neonColors = ['#e040fb', '#00e5ff', '#ffea00'];
            setInterval(() => {
                const petal = document.createElement('div');
                petal.classList.add('petal');
                const color = neonColors[Math.floor(Math.random() * neonColors.length)];
                petal.style.background = color;
                petal.style.boxShadow = `0 0 8px ${color}`;
                petal.style.left = `${Math.random() * 100}vw`;
                petal.style.animationDuration = `${Math.random() * 7 + 8}s`; // 8-15s
                petal.style.animationDelay = `${Math.random() * 2}s`;
                
                const sway = document.createElement('div');
                sway.style.transform = `translateX(${Math.random() * 100 - 50}px) rotate(${Math.random() * 90}deg)`;
                sway.appendChild(petal);
                effectsContainer.appendChild(sway);

                setTimeout(() => sway.remove(), 15000);
            }, 500);
        };
        
        // --- Initial Call ---
        initializeContent();
    });
    </script>
</body>
</html>